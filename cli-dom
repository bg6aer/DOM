#!/usr/bin/env php
<?php

define('ROOT', __DIR__);
require(ROOT . '/vendor/autoload.php');

use Ejz\DOM;

@ $xpath = $_SERVER['argv'][1];
if(!$xpath) {
    echo "Invalid argument \$xpath", chr(10);
    exit(1);
}

$handle = STDIN;
$buffer = array();
if($handle and ftell($handle) === 0)
    while(!feof($handle))
        $buffer[] = fread($handle, 1024);
$buffer = implode('', $buffer);
$dom = new DOM($buffer);
@ $__ = $dom -> find($xpath);
if($__) foreach($__ as $_) echo $_, chr(10);
